/* © Clarify Cloud Limited 2013, 2014
All Rights Reserved
No part of this material or any of its contents may be reproduced, copied, modified or adapted, without prior written consent from Clarify Cloud Limited.
*/
function Constraints(){var a={};var b={};b.time=0;b.meters=0;b.strokes=0;var c,k,h;var i,g,d;var f=false;var j=false;var e,l;this.getAtlConstraint=function(){return a};this.getPieceDiveq=function(){return e};this.getPieceType=function(){return l};this.getDemoHtml=function(){var m="<h4>Please Register</h4>";return m};this.getSubscriptionHtml=function(){var m="<p>Thank You For Using RowCatcher</p><p>You have Exceeded a limit on your Subscription</p><p>To Continue Please Update your Subscription</p>";return m};this.setDailyTotal=function(){var m=$.jStorage.get("constraint");if(m){i=m.time+c;g=m.meters+k;d=m.strokes+h}else{}this.setNewDailyDate()};this.setNewDailyDate=function(){var m={time:i,meters:g,strokes:d,date:new Date()};$.jStorage.set("constraint",m)};this.setNewBalance=function(){var n=$.jStorage.get("constraint");var m=null;if(n){m={time:n.timeTotalD,meters:n.meterTotalD,strokes:n.strokeTotalD,date:n.date}}else{m={time:0,meters:0,strokes:0,date:new Date()}}$.jStorage.set("constraint",m)};this.getDefaultQuota=function(){var m={dailyLimit:{meters:2000,seconds:480,strokes:200},pieceLimit:{meters:400,seconds:90,strokes:40}};return m};this.isPieceLimitReached=function(s){f=false;var v,p,y,n,w,r;if(typeof s.pieceLimit!=="undefined"){v=s.pieceLimit.seconds;p=s.pieceLimit.meters;y=s.pieceLimit.strokes;n=s.dailyLimit.seconds;w=s.dailyLimit.meters;r=s.dailyLimit.strokes}else{s=this.getDefaultQuota();v=s.pieceLimit.seconds;p=s.pieceLimit.meters;y=s.pieceLimit.strokes;n=s.dailyLimit.seconds;w=s.dailyLimit.meters;r=s.dailyLimit.strokes}var t=v-c;var u=p-k;var z=y-h;var o=$.jStorage.get("constraint");var m=parseInt(n-o.time);var q=parseInt(w-o.meters);var x=parseInt(r-o.strokes);if(t<=0){f=true;c=k=h=0}if(u<=0){f=true;c=k=h=0}if(z<=0){f=true;c=k=h=0}return f};this.isDailyLimitReached=function(p){var m,o,n;if(typeof p.dailyLimit!="undefined"){m=p.dailyLimit.seconds;o=p.dailyLimit.meters;n=p.dailyLimit.strokes}else{p=this.getDefaultQuota();m=p.dailyLimit.seconds;o=p.dailyLimit.meters;n=p.dailyLimit.strokes}j=false;var t=$.jStorage.get("constraint");var s=parseInt(m-t.time);var r=parseInt(o-t.meters);var q=parseInt(n-t.strokes);if(s<=0){j=true}if(r<=0){j=true}if(q<=0){j=true}return j};this.setAtlConstraint=function(m){a=m};this.setPieceDiveq=function(m){e=m};this.setPieceTypeInt=function(m){l=m};this.setDataNow=function(n){if(n){c=parseInt(n.time);k=parseInt(n.meters);h=parseInt(n.strokes);var m=$.jStorage.get("constraint");if(m){if(n.time<b.time){b.time=0}if(n.meters<b.meters){b.meters=0}if(n.strokes<b.strokes){b.strokes=0}i=m.time+parseInt(n.time)-b.time;g=m.meters+parseInt(n.meters)-b.meters;d=m.strokes+parseInt(n.strokes)-b.strokes}else{i=0;g=0;d=0}b=n;this.setNewDailyDate()}};this.checklastDownLoad=function(m){m=new Date(m);var o=new Date();var n=new Date(o.getFullYear(),o.getMonth(),o.getDate()-21);var p=false;if(m<n){p=false}else{p=true}return p};this.checkSameDay=function(){var n=new Date().toDateString();var o=$.jStorage.get("constraint");var m;if(o){m=o.date;m=new Date(m)}else{m=new Date()}var p=m.toDateString();if(n===p){}else{$.jStorage.deleteKey("constraint");this.setNewBalance()}}};