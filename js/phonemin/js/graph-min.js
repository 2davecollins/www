/* © Clarify Cloud Limited 2013, 2014
All Rights Reserved
No part of this material or any of its contents may be reproduced, copied, modified or adapted, without prior written consent from Clarify Cloud Limited.
*/
var accelWatchDC=null;(function(){var b=100;var g={frequency:b};document.addEventListener("deviceready",e,false);function e(){accelWatchDC=navigator.accelerometer.watchAcceleration(a,j,g)}function c(){if(!accelWatchDC){navigator.accelerometer.clearWatch(accelWatchDC)}}function a(i){var k=new Object();k.x=i.x;k.y=i.y;k.z=i.z;k.t=((new Date()).getTime());rData.setRawAc(k)}function j(){c();alert("Error ")}var f=0;function d(){var F=0,u,t,s,J,D,k,E,p;var r=new Array();var q=new Array();var o=new Array();var n=new Array();var m=new Array();var A=new Array();var w=new Array();var v=new Array();var H=new Array();var C=new Array();var G=new Array();A=[];w=[];v=[];H=[];C=[];G=[];r=[A];q=[w];o=[v];n=[H];m=[C];var l;var I=[r,q,o,n,m];var B=setInterval(function(){J=rData.getHeartRate();D=rData.getRawAc();k=rData.getStrokeRate();l=rData.getGuiEvent();if(D){A=[F,D.x];w=[F,D.y];v=[F,D.z];var i=[D.x,D.y,D.z];var y=[0,0,-9.8];var x=h(y);E=h(i)-x;H=[F,E];p=E*100;p=Math.round(p);p=Math.abs(p)}if(k){C=[F,k/10];r.push(C);if((F>180)&&(r.length>1)){r.shift()}}if(J&&J!=NaN){G=[F,J/10];m.push(G);if((F>180)&&(m.length>1)){r.shift()}}F++;$.plot($("#graph"),I);if((l=="PEND")||(l=="IEND")){C.length=0;n.length=0;G.length=0;m.length=0;$("#graph").empty()}},1000)}d();function h(i){var k=i.reduce(function(m,l){return(m+l*l)},0);return Math.sqrt(k/i.length)}})();